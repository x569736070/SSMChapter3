<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yuntu.dao.UserMapper">
	<select id="getLoginUser" resultType="User">
		select * from user u
		<trim prefix="where" prefixOverrides="and | or">
			<if test="userCode != null">
				and u.userCode = #{userCode}
			</if>
		</trim>
	</select>

	<resultMap id="UserPage" type="User">
		<result property="userName" column="userName"/>
		<result property="userPassword" column="userPassword"/>
		<association property="role" javaType="Role">
			<result property="roleCode" column="roleCode"/>
			<result property="roleName" column="roleName"/>
		</association>
	</resultMap>
	<select id="getPageAll" resultMap="UserPage" parameterType="com.yuntu.utils.PageUtil">
		select u.*,r.*
		from user u,role r
		where u.userRole=r.id
		limit #{pageindexis},#{pagesize};
	</select>


	<select id="getCount" resultType="int">
		select count(1) from user;
	</select>
</mapper>